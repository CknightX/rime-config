# ckpinyin Rime schema
# encoding: utf-8

schema:
  schema_id: ckpinyin
  name: ckä¸ªäººæ–¹æ¡ˆï¼ˆè‡ªç„¶ç åŒæ‹¼ï¼‰
  version: "1.0"
  author: ck
  description: è‡ªç„¶ç +è¾…åŠ©ç æ–¹æ¡ˆã€‚
  dependencies:
    - stroke

switches:
  - name: ascii_mode
    reset: 0
    states: [ ä¸­æ–‡, è¥¿æ–‡ ]
  - name: full_shape
    states: [ åŠè§’, å…¨è§’ ]
  - name: simplification
    states: [ æ¼¢å­—, æ±‰å­— ]
  - name: ascii_punct
    states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]
  - name: emoji_suggestion
    reset: 1
    states: [ "ğŸˆšï¸ï¸\uFE0E", "ğŸˆ¶ï¸ï¸\uFE0F" ]

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - reverse_lookup_translator
    - script_translator
    - table_translator@custom_phrase # å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰çŸ­è¯­å­ç¿»è¯‘å™¨
    - table_translator
    - lua_translator@datetime_translator
    - lua_translator@calc_translator
    - lua_translator@cmd_translator
  filters:
    - simplifier@emoji_suggestion # æ·»åŠ emojiæ”¯æŒ
    - simplifier
    - uniquifier
    
speller:
  alphabet: "zyxwvutsrqponmlkjihgfedcba;"
  delimiter: "'"
  algebra:
    - derive/^(\w{2});(\w)(\w)$/$1$2$3/
    - derive/^(\w{2});(\w)(\w)$/$1$2/
    - derive/^(\w{2});(\w)(\w)$/$1/
    - derive/^(\w{2});(\w)(\w)$/$1;$2/
    
    # å…è®¸ä½¿ç”¨éè‡ªç„¶ç è¯åº“
    - derive/^([jqxy])u$/$1v/
    - derive/^([aoe])([ioun])$/$1$1$2/
    - derive/^(\w*);(\w)$/$1;$2/
    - xform/^([aoe])(ng)?$/$1$1$2/
    - xform/iu$/Q/
    - xform/[iu]a$/W/
    - xform/[uv]an$/R/
    - xform/[uv]e$/T/
    - xform/ing$|uai$/Y/
    - xform/^sh/U/
    - xform/^ch/I/
    - xform/^zh/V/
    - xform/uo$/O/
    - xform/[uv]n$/P/
    - xform/i?ong$/S/
    - xform/[iu]ang$/D/
    - xform/(.)en$/$1F/
    - xform/(.)eng$/$1G/
    - xform/(.)ang$/$1H/
    - xform/ian$/M/
    - xform/(.)an$/$1J/
    - xform/iao$/C/
    - xform/(.)ao$/$1K/
    - xform/(.)ai$/$1L/
    - xform/(.)ei$/$1Z/
    - xform/ie$/X/
    - xform/ui$/V/
    - xform/(.)ou$/$1B/
    - xform/in$/N/
    - xlit/QWRTYUIOPSDFGHMJCKLZXVBN/qwrtyuiopsdfghmjcklzxvbn/
    
    #- abbrev/^(.).;\w{2}$/$1/  # å£°ç çŸ­è¯­è¾“å…¥
    - abbrev/^(\w{2});\w{2}$/$1/  # å£°ç çŸ­è¯­è¾“å…¥

translator:
  dictionary: ckpinyin
  prism: ck_pinyin
  preedit_format: # é»˜è®¤æƒ…å†µä¸‹æ˜¾ç¤ºå…¨æ‹¼
    - xform/(?<!;)([bpmnljqxy])n/$1in/
    - xform/(?<!;)(\w)g/$1eng/
    - xform/(?<!;)(\w)q/$1iu/
    - xform/(?<!;)([gkhvuirzcs])w/$1ua/
    - xform/(?<!;)(\w)w/$1ia/
    - xform/(?<!;)([dtnlgkhjqxyvuirzcs])r/$1uan/
    - xform/(?<!;)(\w)t/$1ve/
    - xform/(?<!;)([gkhvuirzcs])y/$1uai/
    - xform/(?<!;)(\w)y/$1ing/
    - xform/(?<!;)([dtnlgkhvuirzcs])o/$1uo/
    - xform/(?<!;)(\w)p/$1un/
    - xform/(?<!;)([jqx])s/$1iong/
    - xform/(?<!;)(\w)s/$1ong/
    - xform/(?<!;)([jqxnl])d/$1iang/
    - xform/(?<!;)(\w)d/$1uang/
    - xform/(?<!;)(\w)f/$1en/
    - xform/(?<!;)(\w)h/$1ang/
    - xform/(?<!;)(\w)j/$1an/
    - xform/(?<!;)(\w)k/$1ao/
    - xform/(?<!;)(\w)l/$1ai/
    - xform/(?<!;)(\w)z/$1ei/
    - xform/(?<!;)(\w)x/$1ie/
    - xform/(?<!;)(\w)c/$1iao/
    - xform/(?<!;)([dtgkhvuirzcs])v/$1ui/
    - xform/(?<!;)(\w)b/$1ou/
    - xform/(?<!;)(\w)m/$1ian/
    - xform/(?<!;)([aoe])\1(\w)/$1$2/
    - "xform/(?<!;)(^|[ '])v/$1zh/"
    - "xform/(?<!;)(^|[ '])i/$1ch/"
    - "xform/(?<!;)(^|[ '])u/$1sh/"
    - xform/(?<!;)([jqxy])v/$1u/
    - xform/(?<!;)([nl])v/$1Ã¼/

recognizer:
  import_preset: default
  patterns:
    punct: "^/([0-9]|[A-Za-z])*$"   # æ¯æ¬¡è¾“å…¥å­—ç¬¦éƒ½åˆ¤æ–­æ˜¯å¦åŒ¹é…è¯¥æ­£åˆ™ï¼Œä¸åŒ¹é…åˆ™ç›´æ¥ä¸Šå±
    expression: "^=.*$"
    reverse_lookup: "`[a-z]*'?$"


# emojiæ”¯æŒ
emoji_suggestion:
  opencc_config: emoji.json
  option_name: emoji_suggestion
  tips: all


# è½½å…¥custom_phraseè‡ªå®šä¹‰çŸ­è¯­
custom_phrase:
  dictionary: ""
  user_dict: ckpinyin.phrase
  db_class: tabledb
  enable_completion: false
  enable_sentence: false
  initial_quality: 1

# ç¬”ç”»åæŸ¥åŠŸèƒ½
reverse_lookup:
  dictionary: stroke
  enable_completion: true
  prefix: "`"
  suffix: "'"
  tips: ã€”ç­†ç•«ã€•
  preedit_format:
    - xlit/hspnz/ä¸€ä¸¨ä¸¿ä¸¶ä¹™/
  comment_format:
    - xform/([nl])v/$1Ã¼/

# å¯¼å…¥ç¬¦å·è¡¨
punctuator:
  import_preset: ckpinyin.symbols

# æŒ‰é”®ç»‘å®š
key_binder:
  import_preset: default

# æŒ‰é”®é…ç½®
ascii_composer: 
  switch_key: 
    Caps_Lock: commit_code
    Control_L: noop
    Control_R: noop
    Shift_L: commit_code
    Shift_R: inline_ascii
