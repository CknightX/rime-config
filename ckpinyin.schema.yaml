# ckpinyin Rime schema
# encoding: utf-8

schema:
  schema_id: ckpinyin
  name: ckä¸ªäººæ–¹æ¡ˆï¼ˆè‡ªç„¶ç åŒæ‹¼ï¼‰
  version: "1.0"
  author: ck
  description: è‡ªç„¶ç +è¾…åŠ©ç æ–¹æ¡ˆã€‚
  dependencies:
    - stroke

switches:
  - name: ascii_mode
    reset: 0
    states: [ ä¸­æ–‡, è¥¿æ–‡ ]
  - name: full_shape
    states: [ åŠè§’, å…¨è§’ ]
  - name: simplification
    states: [ æ¼¢å­—, æ±‰å­— ]
  - name: ascii_punct
    states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]
  - name: emoji_suggestion
    reset: 1
    states: [ "ğŸˆšï¸ï¸\uFE0E", "ğŸˆ¶ï¸ï¸\uFE0F" ]

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - reverse_lookup_translator
    - script_translator # æ‹¼éŸ³ç¿»è¯‘å™¨
    - table_translator@custom_phrase # å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰çŸ­è¯­å­ç¿»è¯‘å™¨
    - table_translator@xm # å½¢ç ç¿»è¯‘å™¨
#    - table_translator
    - lua_translator@datetime_translator
    - lua_translator@calc_translator
    - lua_translator@cmd_translator
  filters:
    - simplifier@emoji_suggestion # æ·»åŠ emojiæ”¯æŒ
    - simplifier
    - uniquifier
    
speller:
  alphabet: "zyxwvutsrqponmlkjihgfedcba;"
  delimiter: " '"
  algebra:
    # å…è®¸ä¸è¾“å…¥ï¼›å³å¯ä½¿ç”¨è¾…ç 
    # psï¼šå½“é”®å…¥çš„æ˜¯ç»è¿‡deriveçš„ç¼–ç æ—¶ï¼Œå°†æ— æ³•å‡ºç°è¾…ç æç¤º
    - derive/^([a-z]{2});([a-z])([a-z])$/$1$2$3/
    - derive/^([a-z]{2});([a-z])[a-z]$/$1$2/
    - derive/^([a-z]{2});[a-z]{2}$/$1/
    # åŒæ—¶é”®å…¥å¤šä¸ªå­—æ—¶ï¼Œå…è®¸é™¤ç¬¬ä¸€ä¸ªå­—ä»¥å¤–çš„å­—ä½¿ç”¨è¾…ç 
    - derive/^([a-z]{2});([a-z])([a-z])$/$1;$2$3/
    - derive/^([a-z]{2});([a-z])[a-z]$/$1;$2/
    # å£°ç çŸ­è¯­è¾“å…¥
    - abbrev/^([a-z]{2});[a-z]{2}$/$1/  
    
    # å…è®¸ä½¿ç”¨å…¨æ‹¼è¯åº“
    # æ€æƒ³æ˜¯å°†è¯è¯­å¯¹åº”çš„ç¼–ç å…¨éƒ¨æ›¿æ¢ä¸ºè‡ªç„¶ç å¯¹åº”çš„ç¼–ç 
    - derive/^([jqxy])u$/$1v/
    - derive/^([aoe])([ioun])$/$1$1$2/
    - xform/^([aoe])(ng)?$/$1$1$2/
    - xform/([^;])iu$/$1Q/
    - xform/([^;])[iu]a$/$1W/
    - xform/[uv]an$/R/
    - xform/([^;])[uv]e$/$1T/
    - xform/ing$|uai$/Y/
    - xform/^sh([^;])/U$1/
    - xform/^ch([^;])/I$1/
    - xform/^zh([^;])/V$1/
    - xform/([^;])uo$/$1O/
    - xform/([^;])[uv]n$/$1P/
    - xform/i?ong$/S/
    - xform/[iu]ang$/D/
    - xform/([^;])en$/$1F/
    - xform/(.)eng$/$1G/
    - xform/(.)ang$/$1H/
    - xform/ian$/M/
    - xform/([^;])an$/$1J/
    - xform/iao$/C/
    - xform/([^;])ao$/$1K/
    - xform/([^;])ai$/$1L/
    - xform/([^;])ei$/$1Z/
    - xform/([^;])ie$/$1X/
    - xform/([^;])ui$/$1V/
    - xform/([^;])ou$/$1B/
    - xform/([^;])in$/$1N/
    - xlit/QWRTYUIOPSDFGHMJCKLZXVBN/qwrtyuiopsdfghmjcklzxvbn/
    
# æ‹¼éŸ³ç¿»è¯‘å™¨
translator:
  dictionary: ckpinyin
  prism: ck_pinyin
  preedit_format: 
    - "xform/^/ã€”æ‹¼ã€•/" # æç¤ºå­—è¾“å…¥æ¨¡å¼
  disable_user_dict_for_patterns: 
    - "^[a-z]{1,2}$"  #äºŒç åŠä»¥ä¸‹ä¸ä½¿ç”¨è‡ªåŠ¨è°ƒé¢‘ã€ä¸è‡ªåŠ¨é€ è¯ï¼ˆé¿å…å•å­—è¾“å…¥ä¸è¯ç»„å†²çªï¼‰ï¼ˆç¼ºç‚¹æ˜¯å•å­—æ— æ³•è°ƒé¢‘ï¼‰
    - "^[a-z]{2};$"
  initial_quality: 0.5
# å½¢ç ç¿»è¯‘å™¨
xm:
  dictionary: ckpinyin
  prism: ck_pinyin
  preedit_format: 
    - "xform/^/ã€”å½¢ã€•/" # æç¤ºå­—è¾“å…¥æ¨¡å¼
  disable_user_dict_for_patterns: 
    - "^[a-z]{1,2}$"  #äºŒç åŠä»¥ä¸‹ä¸ä½¿ç”¨è‡ªåŠ¨è°ƒé¢‘ã€ä¸è‡ªåŠ¨é€ è¯ï¼ˆé¿å…å•å­—è¾“å…¥ä¸è¯ç»„å†²çªï¼‰ï¼ˆç¼ºç‚¹æ˜¯å•å­—æ— æ³•è°ƒé¢‘ï¼‰
    - "^[a-z]{2};$"
  initial_quality: 1


recognizer:
  import_preset: default
  patterns:
    punct: "^/([0-9]|[A-Za-z])*$"   # æ¯æ¬¡è¾“å…¥å­—ç¬¦éƒ½åˆ¤æ–­æ˜¯å¦åŒ¹é…è¯¥æ­£åˆ™ï¼Œä¸åŒ¹é…åˆ™ç›´æ¥ä¸Šå±
    expression: "^=.*$" # ç”¨äºluaæ±‚å€¼å™¨
    reverse_lookup: "`[a-z]*'?$"


# emojiæ”¯æŒ
emoji_suggestion:
  opencc_config: emoji.json
  option_name: emoji_suggestion
  tips: all


# è½½å…¥custom_phraseè‡ªå®šä¹‰çŸ­è¯­
custom_phrase:
  dictionary: ""
  user_dict: ckpinyin.phrase
  db_class: tabledb
  enable_completion: false
  enable_sentence: false
  initial_quality: 1
  preedit_format: # é»˜è®¤æƒ…å†µä¸‹æ˜¾ç¤ºå…¨æ‹¼
    - "xform/^/ã€”çŸ­è¯­ã€•/" # æç¤ºå­—è¾“å…¥æ¨¡å¼

# ç¬”ç”»åæŸ¥åŠŸèƒ½
reverse_lookup:
  dictionary: stroke
  enable_completion: true
  prefix: "`"
  suffix: "'"
  tips: ã€”ç­†ç•«ã€•
  preedit_format:
    - xlit/hspnz/ä¸€ä¸¨ä¸¿ä¸¶ä¹™/
  comment_format:
    - xform/([nl])v/$1Ã¼/

# å¯¼å…¥ç¬¦å·è¡¨
punctuator:
  import_preset: ckpinyin.symbols

# æŒ‰é”®ç»‘å®š
key_binder:
  import_preset: default

# æŒ‰é”®é…ç½®
ascii_composer: 
  switch_key: 
    Caps_Lock: commit_code
    Control_L: noop
    Control_R: noop
    Shift_L: commit_code
    Shift_R: inline_ascii
